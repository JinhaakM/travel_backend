<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="/css/admin_homepage.css">
<meta name="_csrf_header" content="${_csrf.headerName}">
<meta name="_csrf" content="${_csrf.token}">
<meta charset="UTF-8">
<title>관리자 페이지</title>
</head>

<body>
    <h1>관리자 페이지</h1>
    
    <div id="user-list-container">
        <ul id="user-list">
            <c:forEach var="user" items="${users}">
                <li class="user-item">${user}</li>
            </c:forEach>
        </ul>
    </div>
    
    <div id="pagination">
        <button id="prev">이전</button>
        <span id="page-info"></span>
        <button id="next">다음</button>
    </div>
    
<script>
$(document).ready(function() {
    var pageSize = 10; // 한 페이지에 보여줄 유저 수
    var currentPage = 1;
    var $userItems = $('.user-item');
    var totalPages = Math.ceil($userItems.length / pageSize);

    function showPage(page) {
        var startIndex = (page - 1) * pageSize;
        var endIndex = page * pageSize;

        $userItems.hide();
        $userItems.slice(startIndex, endIndex).show();

        $('#page-info').text('Page ' + page + ' of ' + totalPages);
    }
    
    $('#prev').click(function() {
        if (currentPage > 1) {
            currentPage--;
            showPage(currentPage);
        }
    });
    
    $('#next').click(function() {
        if (currentPage < totalPages) {
            currentPage++;
            showPage(currentPage);
        }
    });
    
    // 첫 페이지를 보여줍니다.
    showPage(currentPage);
});
</script>

<script src="/js/admin_homepage.js"></script>    
</body>
</html>
